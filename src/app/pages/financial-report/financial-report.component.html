<div class="financial-report" [@jackInTheBox] [@jackInTheBoxOnEnter]>
    <div nz-row class="container-nav">
        <nz-breadcrumb nz-page-header-breadcrumb>
            <nz-breadcrumb-item><a class="route-link" routerLink="/home"><i nz-icon nzType="home" nzTheme="outline"></i>首页</a></nz-breadcrumb-item>
            <nz-breadcrumb-item>财务报表</nz-breadcrumb-item>
            <nz-breadcrumb-item>列表</nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>

    <div nz-row class="content">
        <!-- <div class="search-list-box">
            <search-list [searchListLayout]="searchListLayout" [searchListModel]="searchListModel" [searchListItem]="searchListItem" (onSearch)="search()" (onReseat)="reseat()"></search-list>
        </div> -->
        <div nz-row class="form-content">
            <form nz-form [formGroup]="validateForm">
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="customerName">姓名</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <input nz-input [nzSize]="'small'" id="customerName" formControlName="customerName"/>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="carNo">车牌</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <input nz-input [nzSize]="'small'" id="carNo" formControlName="carNo"/>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="companyCode">投保公司</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-select nzShowSearch [nzSize]="'small'" nzAllowClear id="companyCode" formControlName="companyCode">
                                <nz-option *ngFor="let option of formList.insuranceCompanysList" [nzLabel]="option.name" [nzValue]="option.value"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="userId">业务员</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-select nzShowSearch [nzSize]="'small'" nzAllowClear id="userId" formControlName="userId">
                                <nz-option *ngFor="let option of formList.salesmenList" [nzLabel]="option.name" [nzValue]="option.value"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="commitTime">提交日期</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-range-picker [nzSize]="'small'" [nzPlaceHolder]="[]" [nzFormat]="'yyyy-MM-dd'" id="commitTime" formControlName="commitTime"></nz-range-picker>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="orderTime">出单日期</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-range-picker [nzSize]="'small'" [nzPlaceHolder]="[]" [nzFormat]="'yyyy-MM-dd'" id="orderTime" formControlName="orderTime"></nz-range-picker>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="compulsoryRatio">交强险基础比例</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="compulsoryRatio" [nzMin]="0" formControlName="compulsoryRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="compulsoryAdditionRatio">交强险加投比例</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="compulsoryAdditionRatio" [nzMin]="0" formControlName="compulsoryAdditionRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="commercialRatio">商业险基础比例</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="commercialRatio" [nzMin]="0" formControlName="commercialRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="commercialAdditionRatio">商业险加投比例</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="commercialAdditionRatio" [nzMin]="0" formControlName="commercialAdditionRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="drivingRatio">驾意险政策</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="drivingRatio" [nzMin]="0" formControlName="drivingRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="allowanceRatio">津贴宝政策</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="allowanceRatio" [nzMin]="0" formControlName="allowanceRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="glassRatio">玻璃膜政策</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="glassRatio" [nzMin]="0" formControlName="glassRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="baseRatio">基础计算比例</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="baseRatio" [nzMin]="0" formControlName="baseRatio"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="reward">奖励</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-input-number [nzSize]="'small'" style="width: 100%;" id="reward" [nzMin]="0" formControlName="reward"></nz-input-number>
                        </nz-form-control>
                    </nz-form-item>
                </div>
                <div nz-row nz-col nzXs="24" nzSm="12" nzLg="8" nzXl="6" nzXXl="6" nzGutter="0">
                    <nz-form-item class="nzFormItem">
                        <nz-form-label nz-col nzXs="10" class="nzFormLabel" nzFor="userId">店铺</nz-form-label>
                        <nz-form-control nz-col nzXs="14" class="nzFormControl">
                            <nz-select nzShowSearch [nzSize]="'small'" nzAllowClear id="tenantCode" formControlName="tenantCode">
                                <nz-option *ngFor="let option of formList.tenantCodeList" [nzLabel]="option.name" [nzValue]="option.value"></nz-option>
                            </nz-select>
                        </nz-form-control>
                    </nz-form-item>
                </div>

                <div nz-row nz-col nzXs="24" class="form-btn-group">
                    <button class="form-btn" nz-button [nzType]="'primary'"  (click)="search()"><i nz-icon class="search-icon" nzType="search" nzTheme="outline"></i>查询</button>
                    <button class="form-btn" nz-button (click)="reset()"><i nz-icon class="reload-icon" nzType="reload" nzTheme="outline"></i>重置</button>
                </div>
            </form>
        </div>
        <div class="search-list-menu-group">
            <button nz-button [nzType]="'primary'" (click)="exportFinancial()"><i nz-icon nzType="download" nzTheme="outline"></i>导出</button>
        </div>
        <div class="search-list-table">
            <ng-container *ngIf="!isLoading; else skeleton">
                <nz-table #list [nzData]="queryList" nzShowPagination="false" [nzScroll]="{ x: '3500px' }" [nzSize]="'middle'">
                    <thead>
                      <tr>
                        <ng-container *ngFor="let th of tableCfg.thead">
                            <ng-container *ngIf="th.type === 'fixed-right'">
                                <th [nzRight]='true' class="sticky-ele">{{ th.name }}</th>
                            </ng-container>
                            <ng-container *ngIf="th.type === 'fixed-left'">
                                <th [nzLeft]='true' class="sticky-ele">{{ th.name }}</th>
                            </ng-container>
                            <ng-container *ngIf="!th.type">
                                <th>{{ th.name }}</th>
                            </ng-container>
                        </ng-container>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of list.data">
                        <td>{{data.updateTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                        <td>{{data.compulsoryEndTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                        <td>{{data.registerTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
                        <td>{{data.createUser || '--'}}</td>
                        <td>{{data.customerName || '--'}}</td>
                        <td>{{data.carNo || '--'}}</td>
                        <td>{{data.commercialSumPremium}}</td>
                        <td>{{data.compulsorySumPremium}}</td>
                        <td>{{data.taxActual}}</td>
                        <td>{{data.totalPremium}}</td>
                        <td>{{data.drivingPremium}}</td>
                        <td>{{data.allowancePremium}}</td>
                        <td>{{data.glassPremium}}</td>
                        <td>{{data.cashBack}}</td>
                        <td>{{data.companyName}}</td>
                        <td>{{data.compulsoryRatio}}</td>
                        <td>{{data.compulsoryHandlingFee}}</td>
                        <td>{{data.compulsoryAdditionRatio}}</td>
                        <td>{{data.compulsoryAdditionHandlingFee}}</td>
                        <td>{{data.commercialRatio}}</td>
                        <td>{{data.commercialHandlingFee}}</td>
                        <td>{{data.commercialAdditionRatio}}</td>
                        <td>{{data.commercialAdditionHandlingFee}}</td>
                        <td>{{data.totalHandlingFee}}</td>
                        <td>{{data.policyProfit}}</td>
                        <td>{{data.drivingRatio}}</td>
                        <td>{{data.drivingPolicy}}</td>
                        <td>{{data.drivingHandlingFee}}</td>
                        <td>{{data.allowanceRatio}}</td>
                        <td>{{data.allowancePolicy}}</td>
                        <td>{{data.allowanceHandlingFee}}</td>
                        <td>{{data.glassRatio}}</td>
                        <td>{{data.glassPolicy}}</td>
                        <td>{{data.glassHandlingFee}}</td>
                        <td>{{data.reward}}</td>
                        <td>{{data.totalProfit}}</td>
                      </tr>
                    </tbody>
                  </nz-table>
            </ng-container>
            <ng-template #skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
            </ng-template>
        </div>
        <div class="search-list-table-pagination">
            <search-list-pagination [pageInfo]="pageInfo" (onPageChange)="onPageChange($event)"></search-list-pagination>
        </div>
    </div>
</div>
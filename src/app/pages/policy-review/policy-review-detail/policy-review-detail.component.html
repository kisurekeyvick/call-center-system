<div class="policy-review-detail" [@jackInTheBox] [@jackInTheBoxOnEnter]>
    <div nz-row class="container-nav">
        <nz-breadcrumb nz-page-header-breadcrumb>
            <nz-breadcrumb-item><a class="route-link" routerLink="/home"><i nz-icon nzType="home" nzTheme="outline"></i>首页</a></nz-breadcrumb-item>
            <nz-breadcrumb-item>保单审核</nz-breadcrumb-item>
            <nz-breadcrumb-item><a class="route-link" routerLink="/policyReview/list">列表</a></nz-breadcrumb-item>
            <nz-breadcrumb-item>详情</nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>

    <div nz-row class="content">
        <div class="detail-box">
            <div class="detail-item">
                <p class="title">投保公司</p>
                <div nz-row class="detail-item-content">
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">投保公司：</span><span class="nzFormControl">{{ detailInfo.insCompany.companyName }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">联系人：</span><span class="nzFormControl">{{ detailInfo.insCompany.createUser }}</span></p>
                </div>
            </div>

            <div class="detail-item">
                <p class="title"><i nz-icon nzType="user" nzTheme="outline"></i>客户信息</p>
                <div nz-row class="detail-item-content">
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">被保险人姓名：</span><span class="nzFormControl">{{ detailInfo.customerInfo.customerName }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">身份证号码：</span><span class="nzFormControl">{{ detailInfo.customerInfo.idCard }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">联系电话：</span><span class="nzFormControl">{{ detailInfo.customerInfo.customerPhone }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzGutter="0"><span class="nzFormLabel">被保险人地址：</span><span class="nzFormControl">{{ detailInfo.customerInfo.customerAddress }}</span></p>
                </div>
            </div>

            <div class="detail-item">
                <p class="title"><i nz-icon nzType="info-circle" nzTheme="outline"></i>投保车辆信息</p>
                <div nz-row class="detail-item-content">
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">车牌号码：</span><span class="nzFormControl">{{ detailInfo.carInfo.carNo }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">厂牌型号：</span><span class="nzFormControl">{{ detailInfo.carInfo.brandName }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">核定座位：</span><span class="nzFormControl">{{ detailInfo.carInfo.seatNumber }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">初次登记：</span><span class="nzFormControl">{{ detailInfo.carInfo.registerTime | date:'yyyy-MM-dd HH:mm:ss' }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">使用性质：</span><span class="nzFormControl">{{ detailInfo.carInfo.usageName }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">车架号码：</span><span class="nzFormControl">{{ detailInfo.carInfo.vinNo }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">发动机号：</span><span class="nzFormControl">{{ detailInfo.carInfo.engineNo }}</span></p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0"><span class="nzFormLabel">新车购置价：</span><span class="nzFormControl">{{ detailInfo.carInfo.purchasePrice }}</span></p>
                </div>
            </div>

            <!-- <div class="detail-item">
                <p class="title">保险期间</p>
                <div nz-row class="detail-item-content">
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">交强险 {{ detailInfo.insTime.compulsoryStartTime | date:'yyyy-MM-dd HH:mm:ss' }} ~ {{ detailInfo.insTime.compulsoryEndTime | date:'yyyy-MM-dd HH:mm:ss' }}</p>
                    <p nz-col class="nzFormItem" nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">商业险 {{ detailInfo.insTime.commercialStartTime | date:'yyyy-MM-dd HH:mm:ss' }} ~ {{ detailInfo.insTime.commercialEndTime | date:'yyyy-MM-dd HH:mm:ss' }}</p>
                </div>
            </div> -->

            <div class="detail-item">
                <p class="title"><i nz-icon nzType="money-collect" nzTheme="outline"></i>投保险种</p>
                <div class="ins-table-list">
                    <nz-table #list [nzData]="detailInfo.insType" nzShowPagination="false"  [nzTotal]="detailInfo.insType.length">
                        <thead>
                            <tr>
                                <th>投保险种</th>
                                <th>保险金额/责任限额</th>
                                <th>保费（元）</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let data of list.data">
                                <td>{{data.insName}}</td>
                                <td>{{data.coverage || '--'}}</td>
                                <td>{{data.payPremium}}</td>
                            </tr>
                        </tbody>
                    </nz-table>
                </div>
            </div>
            
            <div class="detail-item summation">
                <p>保险费合计：{{ detailInfo.sumPremium || 0 }}元</p>
            </div>

            <div class="detail-item">
                <p class="title"><i nz-icon nzType="car" nzTheme="outline"></i>派送信息</p>
                <div nz-row class="detail-item-content send-info">
                    <form nz-form [formGroup]="validateForm">
                        <div nz-row nz-col nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">
                            <nz-form-item class="nzFormItem">
                                <nz-form-label nz-col nzXs="8" nzRequired  nzFor="receiptDate" class="nzFormLabel">派送时间</nz-form-label>
                                <nz-form-control nz-col nzXs="16" nzHasFeedback class="nzFormControl" nzErrorTip="请选择派送时间">
                                    <nz-date-picker [nzFormat]="'yyyy-MM-dd HH:mm:ss'" id="receiptDate" formControlName="receiptDate"></nz-date-picker>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-row nz-col nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">
                            <nz-form-item class="nzFormItem">
                                <nz-form-label nz-col nzXs="8" nzRequired  nzFor="receiptName" class="nzFormLabel">收件人</nz-form-label>
                                <nz-form-control nz-col nzXs="16" nzHasFeedback class="nzFormControl" nzErrorTip="请选择收件人">
                                    <input nz-input placeholder="请输入收件人" id="receiptName" formControlName="receiptName"/>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-row nz-col nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">
                            <nz-form-item class="nzFormItem">
                                <nz-form-label nz-col nzXs="8" nzRequired  nzFor="receiptPhone" class="nzFormLabel">联系方式</nz-form-label>
                                <nz-form-control nz-col nzXs="16" nzHasFeedback class="nzFormControl" [nzErrorTip]="receiptPhoneErrorTpl">
                                    <input nz-input placeholder="请输入联系方式" id="receiptPhone" formControlName="receiptPhone"/>
                                </nz-form-control>

                                <ng-template #receiptPhoneErrorTpl let-control>
                                    <ng-container *ngIf="control.hasError('required')">
                                        请输入联系方式
                                    </ng-container>
                                    <ng-container *ngIf="control.hasError('confirm')">
                                        请输入正确的联系方式
                                    </ng-container>
                                </ng-template>
                            </nz-form-item>
                        </div>
                        <div nz-row nz-col nzXs="24" nzSm="24" nzLg="12" nzXl="6" nzXXl="6" nzGutter="0">
                            <nz-form-item class="nzFormItem">
                                <nz-form-label nz-col nzXs="8" nzRequired  nzFor="sender" class="nzFormLabel">寄件人</nz-form-label>
                                <nz-form-control nz-col nzXs="16" nzHasFeedback class="nzFormControl" nzErrorTip="请输入寄件人">
                                    <input nz-input placeholder="请输入寄件人" id="sender" formControlName="sender"/>
                                </nz-form-control>
                            </nz-form-item>
                        </div>
                        <div nz-row nz-col nzXs="24">
                            <div nz-row nz-col nzXs="24" nzSm="24" nzGutter="0">
                                <nz-form-item class="nzFormItem">
                                    <nz-form-label nz-col nzXs="8" nzFor="receiptRemarks" class="nzFormLabel">备注</nz-form-label>
                                    <nz-form-control nz-col nzXs="16" nzHasFeedback class="nzFormControl" nzErrorTip="请输入备注">
                                        <textarea nz-input [nzAutosize]="{ minRows: 1, maxRows: 5 }" placeholder="请输入备注" id="receiptRemarks" formControlName="receiptRemarks"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="btn-group operation-group">
            <button nz-button nzType="primary" (click)="approved()">通过</button>
            <button nz-button nzType="primary" (click)="saveSendInfo()">保存</button>
            <button nz-button nzType="primary" (click)="registerAgain()">重新登记</button>
            <button nz-button nzType="danger" (click)="chargeback()">退单</button>
            <button nz-button nzType="default" (click)="back()">返回</button>
        </div>
    </div>
</div>
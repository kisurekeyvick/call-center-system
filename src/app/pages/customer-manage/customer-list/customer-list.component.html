<div class="customer-list" [@jackInTheBox] [@jackInTheBoxOnEnter]>
    <div nz-row class="container-nav">
        <nz-breadcrumb nz-page-header-breadcrumb>
            <nz-breadcrumb-item><a class="route-link" routerLink="/home"><i nz-icon nzType="home" nzTheme="outline"></i>首页</a></nz-breadcrumb-item>
            <nz-breadcrumb-item>客户管理</nz-breadcrumb-item>
            <nz-breadcrumb-item>客户列表</nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>
    <div nz-row class="content">
        <div class="search-list-box">
            <search-list [searchListModel]="searchListModel" [searchListItem]="searchListItem" (onSearch)="search()" (onReseat)="reseat()"></search-list>
        </div>
        <div class="search-list-menu-group">
            <button nz-button [nzType]="'primary'" (click)="assignCustomer()"><i nz-icon nzType="enter" nzTheme="outline"></i>分配客户</button>
            <button nz-button [nzType]="'primary'" (click)="transferCustomer()"><i nz-icon nzType="swap" nzTheme="outline"></i>转移客户</button>
            <button nz-button [nzType]="'primary'" (click)="trackingCustomer()"><i nz-icon nzType="setting" nzTheme="outline"></i>投保跟踪设置</button>
            <button nz-button [nzType]="'primary'" (click)="exportCustomer()"><i nz-icon nzType="download" nzTheme="outline"></i>导出</button>
            <button nz-button [nzType]="'danger'" [disabled]="!canDeleteCustomer" (click)="deleteCustomer()"><i nz-icon nzType="delete" nzTheme="outline"></i>删除</button>
        </div>
        <div class="search-list-table">
            <ng-container *ngIf="!isLoading; else skeleton">
                <nz-table #list [nzData]="customerList" nzShowPagination="false">
                    <thead>
                      <tr>
                        <th nzShowCheckbox
                            [nzIndeterminate]="isIndeterminate"
                            [(nzChecked)]="isAllDisplayDataChecked"
                            (nzCheckedChange)="checkAll($event)"></th>
                        <ng-container *ngFor="let th of tableCfg.thead">
                            <th>{{ th.name }}</th>
                        </ng-container>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let data of list.data">
                        <td nzShowCheckbox [(nzChecked)]="mapOfCheckedId[data.carId]" (nzCheckedChange)="refreshStatus()"></td>
                        <td><a (click)="customerDetail(data)">{{data.plateNo || '--'}}</a></td>
                        <td>{{data.customerName || '--'}}</td>
                        <td>{{data.vinNo || '--'}}</td>
                        <td>{{data.brandName || '--'}}</td>
                        <td>{{data.enrollDate || '--'}}</td>
                        <td>{{data.commercialEndTime || '--'}}</td>
                        <td>{{data.compulsoryEndTime || '--'}}</td>
                        <td>{{data.comCode || '--'}}</td>
                        <td>{{data.customerType || '--'}}</td>
                        <td>{{data.assigneeName || '--'}}</td>
                        <td>{{data.modifierTime || '--'}}</td>
                      </tr>
                    </tbody>
                  </nz-table>
            </ng-container>
            <ng-template #skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
                <nz-skeleton [nzActive]="true"></nz-skeleton>
            </ng-template>
        </div>
        <div class="search-list-table-pagination">
            <search-list-pagination [pageInfo]="pageInfo" (onPageChange)="onPageChange($event)"></search-list-pagination>
        </div>
    </div>
</div>